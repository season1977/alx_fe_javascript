<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic Quote Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f4f4f9;
      color: #333;
      text-align: center;
    }

    h1 {
      color: #444;
    }

    #quoteDisplay {
      margin: 20px auto;
      padding: 20px;
      width: 60%;
      border: 2px solid #333;
      border-radius: 10px;
      background: #fff;
      font-size: 1.2rem;
      min-height: 60px;
    }

    input, button {
      margin: 10px;
      padding: 10px;
      font-size: 1rem;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    button {
      cursor: pointer;
      background: #007BFF;
      color: white;
      border: none;
    }

    button:hover {
      background: #0056b3;
    }

    .controls {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h1>Dynamic Quote Generator</h1>

  <!-- Quote Display -->
  <div id="quoteDisplay">Click "New Quote" to see a random quote</div>

  <!-- Add New Quote -->
  <input type="text" id="newQuote" placeholder="Enter a new quote" />
  <button onclick="addQuote()">Add Quote</button>

  <!-- Show Random Quote -->
  <button onclick="displayRandomQuote()">New Quote</button>

  <div class="controls">
    <!-- JSON Import/Export -->
    <button onclick="exportToJsonFile()">Export Quotes (JSON)</button>
    <input type="file" id="importFile" accept=".json" onchange="importFromJsonFile(event)" />
  </div>

  <script>
    // ====== QUOTES STORAGE ======
    let quotes = JSON.parse(localStorage.getItem("quotes")) || [
      "The best way to get started is to quit talking and begin doing.",
      "Don’t let yesterday take up too much of today.",
      "It’s not whether you get knocked down, it’s whether you get up.",
      "If you are working on something exciting, it will keep you motivated."
    ];

    const quoteDisplay = document.getElementById("quoteDisplay");

    // Save quotes to localStorage
    function saveQuotes() {
      localStorage.setItem("quotes", JSON.stringify(quotes));
    }

    // Display a random quote
    function displayRandomQuote() {
      if (quotes.length === 0) {
        quoteDisplay.textContent = "No quotes available.";
        return;
      }
      const randomIndex = Math.floor(Math.random() * quotes.length);
      quoteDisplay.textContent = quotes[randomIndex];

      // Save last viewed quote in sessionStorage
      sessionStorage.setItem("lastQuote", quotes[randomIndex]);
    }

    // Add new quote
    function addQuote() {
      const newQuoteInput = document.getElementById("newQuote");
      const newQuote = newQuoteInput.value.trim();
      if (newQuote) {
        quotes.push(newQuote);
        saveQuotes();
        newQuoteInput.value = "";
        alert("Quote added successfully!");
      } else {
        alert("Please enter a valid quote.");
      }
    }

    // Export quotes as JSON file
    function exportToJsonFile() {
      const jsonData = JSON.stringify(quotes, null, 2);
      const blob = new Blob([jsonData], { type: "application/json" });
      const url = URL.createObjectURL(blob);

      const a = document.createElement("a");
      a.href = url;
      a.download = "quotes.json";
      a.click();

      URL.revokeObjectURL(url);
    }

    // Import quotes from JSON file
    function importFromJsonFile(event) {
      const fileReader = new FileReader();
      fileReader.onload = function(e) {
        try {
          const importedQuotes = JSON.parse(e.target.result);
          if (Array.isArray(importedQuotes)) {
            quotes.push(...importedQuotes);
            saveQuotes();
            alert("Quotes imported successfully!");
          } else {
            alert("Invalid JSON format. Please upload a valid quotes file.");
          }
        } catch (error) {
          alert("Error reading JSON file: " + error.message);
        }
      };
      fileReader.readAsText(event.target.files[0]);
    }

    // On page load, show last viewed quote if available
    window.onload = () => {
      const lastQuote = sessionStorage.getItem("lastQuote");
      if (lastQuote) {
        quoteDisplay.textContent = lastQuote;
      }
    };
  </script>
  <script src="script.js"></script>

</body>
</html>
